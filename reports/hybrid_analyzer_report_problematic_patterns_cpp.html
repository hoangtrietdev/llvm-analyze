<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="report_style.css" media="all" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hybrid Analyzer Technical Report - Problematic Patterns</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* Unified Report Theme */
      :root {
        --bg: #0f1115;
        --bg-alt: #161b22;
        --panel: #1c232b;
        --panel-alt: #25303b;
        --text: #e2e8f0;
        --text-soft: #94a3b8;
        --accent: #3b82f6;
        --accent-alt: #60a5fa;
        --ok: #22c55e;
        --warn: #fbbf24;
        --bad: #f87171;
        --neutral: #64748b;
        --radius: 8px;
        --font-stack: system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial, sans-serif;
        --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono",
          monospace;
        --code-bg: #0b0e13;
        --code-border: #233041;
      }

      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: var(--font-stack);
        background: var(--bg);
        color: var(--text);
        margin: 2rem auto;
        max-width: 1080px;
        line-height: 1.55;
        padding: 0 1.5rem 4rem;
      }

      h1,
      h2,
      h3,
      h4 {
        font-weight: 600;
        line-height: 1.25;
      }

      h1 {
        font-size: 2.1rem;
        margin-top: 0;
        background: linear-gradient(90deg, var(--accent), var(--accent-alt));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      h2 {
        margin-top: 3rem;
        font-size: 1.35rem;
        position: relative;
      }

      h2::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: -6px;
        width: 52px;
        height: 3px;
        background: var(--accent);
        border-radius: 2px;
      }

      h3 {
        margin-top: 2rem;
        font-size: 1.05rem;
        color: var(--accent-alt);
      }

      p {
        margin: 0.85rem 0;
      }

      a {
        color: var(--accent-alt);
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }

      code,
      pre {
        font-family: var(--mono);
      }
      code {
        background: var(--code-bg);
        border: 1px solid var(--code-border);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.85rem;
      }
      pre {
        background: var(--code-bg);
        border: 1px solid var(--code-border);
        padding: 1rem 1rem;
        border-radius: var(--radius);
        overflow-x: auto;
        font-size: 0.8rem;
      }
      pre code {
        background: none;
        border: none;
        padding: 0;
      }

      .table-wrapper {
        background: var(--panel);
        border: 1px solid #2c3947;
        border-radius: var(--radius);
        padding: 0.75rem 1rem 1.25rem;
        margin: 1.25rem 0 2rem;
        box-shadow: 0 4px 14px -6px #000;
      }

      .table-wrapper h3 {
        margin-top: 0.25rem;
      }

      .table-wrapper table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.78rem;
      }
      .table-wrapper th,
      .table-wrapper td {
        padding: 8px 10px;
        border: 1px solid #2c3947;
        text-align: left;
      }
      .table-wrapper th {
        background: var(--panel-alt);
        font-weight: 600;
        letter-spacing: 0.5px;
        font-size: 0.67rem;
        text-transform: uppercase;
        color: var(--text-soft);
      }
      .table-wrapper tbody tr:nth-child(odd) {
        background: #1a222b;
      }
      .table-wrapper tbody tr:hover {
        background: #223041;
      }

      .badge {
        display: inline-block;
        font-size: 0.62rem;
        padding: 4px 8px;
        letter-spacing: 0.5px;
        font-weight: 600;
        border-radius: 14px;
        text-transform: uppercase;
        background: var(--neutral);
        color: #fff;
      }
      .badge.ok {
        background: var(--ok);
      }
      .badge.warn {
        background: var(--warn);
        color: #422006;
      }
      .badge.bad {
        background: var(--bad);
      }
      .badge.info {
        background: var(--accent-alt);
      }

      .flex {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
      }
      .panel {
        background: linear-gradient(145deg, var(--panel), var(--panel-alt));
        padding: 1rem 1.1rem 1.2rem;
        border: 1px solid #2c3947;
        border-radius: var(--radius);
        box-shadow: 0 6px 22px -10px #000;
        flex: 1 1 260px;
        min-width: 240px;
        position: relative;
      }
      .panel h3 {
        margin-top: 0;
        font-size: 0.95rem;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        color: var(--text-soft);
      }
      .panel p {
        font-size: 0.75rem;
        color: var(--text-soft);
      }

      blockquote {
        background: var(--panel);
        border-left: 4px solid var(--accent);
        margin: 1.5rem 0;
        padding: 0.75rem 1rem;
        border-radius: var(--radius);
        font-size: 0.85rem;
        color: var(--text-soft);
      }

      .flowchart {
        background: var(--panel);
        padding: 1rem;
        border: 1px solid #2c3947;
        font-family: var(--mono);
        white-space: pre;
        overflow-x: auto;
        border-radius: var(--radius);
        font-size: 11.5px;
        line-height: 1.3;
      }

      .metric-bar {
        position: relative;
        height: 8px;
        background: #1d2732;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 6px;
      }
      .metric-bar span {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: var(--accent);
      }

      .grid {
        display: grid;
        gap: 1rem;
      }
      .grid.cols-3 {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }

      .inline-kv {
        display: inline-flex;
        gap: 4px;
        align-items: center;
        background: var(--panel);
        padding: 2px 8px;
        border-radius: 20px;
        font-size: 0.65rem;
        border: 1px solid #2c3947;
      }

      .legend {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        font-size: 0.6rem;
        margin: 0.5rem 0 1.1rem;
      }
      .legend span {
        background: var(--panel-alt);
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid #2c3947;
      }

      .footer-note {
        margin-top: 4rem;
        font-size: 0.65rem;
        color: var(--text-soft);
        text-align: center;
        opacity: 0.7;
      }

      .trust-box {
        background: linear-gradient(135deg, #1d2935, #273546);
        border: 1px solid #314352;
        padding: 1rem 1.15rem 1.1rem;
        border-radius: var(--radius);
        margin: 1.5rem 0 2rem;
        position: relative;
        box-shadow: 0 8px 30px -18px #000;
      }
      .trust-box h3 {
        margin: 0 0 0.6rem;
        font-size: 0.95rem;
        letter-spacing: 0.5px;
        color: var(--accent-alt);
      }
      .trust-box ul {
        margin: 0;
        padding-left: 1.15rem;
        font-size: 0.72rem;
        line-height: 1.4;
      }
      .trust-box li {
        margin: 0.35rem 0;
      }

      .formula {
        background: #111a22;
        padding: 0.85rem 1rem;
        border: 1px solid #223140;
        border-radius: var(--radius);
        font-family: var(--mono);
        font-size: 0.7rem;
        line-height: 1.35;
      }

      .callout {
        background: #17202a;
        border: 1px solid #253241;
        padding: 0.75rem 0.9rem;
        border-radius: var(--radius);
        font-size: 0.7rem;
        margin: 1rem 0 1.25rem;
      }
      .callout strong {
        color: var(--accent-alt);
      }

      .checklist {
        display: grid;
        gap: 0.6rem;
        grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
        margin: 1.2rem 0 1.6rem;
      }
      .checklist .item {
        background: var(--panel);
        border: 1px solid #2c3947;
        border-radius: var(--radius);
        padding: 0.6rem 0.7rem 0.75rem;
        font-size: 0.65rem;
        line-height: 1.35;
        position: relative;
      }
      .checklist .item:before {
        content: "✔";
        position: absolute;
        top: 6px;
        right: 8px;
        font-size: 0.7rem;
        color: var(--ok);
      }

      .chart-container {
        background: var(--panel);
        border: 1px solid #2c3947;
        padding: 1rem;
        border-radius: var(--radius);
        margin: 1.25rem auto 2rem;
      }

      .small-note {
        font-size: 0.6rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.75;
      }

      hr {
        border: none;
        border-top: 1px solid #253241;
        margin: 3rem 0 2.5rem;
      }

      .badge-ring {
        display: inline-flex;
        gap: 6px;
        flex-wrap: wrap;
      }
      .badge-ring .badge {
        font-size: 0.55rem;
        opacity: 0.85;
      }

      /* Cross-report navigation */
      .report-nav {
        display: flex;
        flex-wrap: wrap;
        gap: 0.65rem;
        margin: 1rem 0 2rem;
        background: var(--panel);
        padding: 0.6rem 0.8rem 0.75rem;
        border: 1px solid #2c3947;
        border-radius: var(--radius);
        font-size: 0.62rem;
      }
      .report-nav a {
        background: #1e2833;
        padding: 6px 10px;
        border-radius: 20px;
        border: 1px solid #2c3947;
        font-weight: 600;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        font-size: 0.6rem;
        color: var(--accent-alt);
        text-decoration: none;
      }
      .report-nav a:hover {
        background: #243240;
        text-decoration: none;
      }
      .report-nav .primary {
        background: var(--accent);
        color: #fff;
        border-color: var(--accent-alt);
      }
      .report-nav .primary:hover {
        background: var(--accent-alt);
      }

      /* AI Prompting Section Styles */
      .ai-prompt-box {
        background: linear-gradient(135deg, #1a2332, #1f2d3d);
        border: 2px solid #3b82f6;
        border-left: 6px solid #3b82f6;
        padding: 1.2rem 1.5rem;
        border-radius: var(--radius);
        margin: 1.5rem 0 2rem;
        box-shadow: 0 8px 24px -10px rgba(59, 130, 246, 0.3);
      }

      .ai-prompt-box pre {
        background: #0d1520;
        border: 1px solid #2d4356;
        padding: 1.2rem;
        border-radius: 6px;
        color: #e2e8f0;
        font-size: 0.82rem;
        line-height: 1.6;
        overflow-x: auto;
        margin: 0.5rem 0 1rem;
      }

      .ai-prompt-box code {
        background: #162031;
        border: 1px solid #2d4356;
        color: #60a5fa;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.85rem;
      }

      .ai-example-success {
        background: linear-gradient(135deg, #0f2315, #14291c);
        border-left: 6px solid #22c55e;
        border: 2px solid #22c55e;
        padding: 1.2rem 1.5rem;
        border-radius: var(--radius);
        margin: 1.5rem 0 2rem;
        box-shadow: 0 8px 24px -10px rgba(34, 197, 94, 0.3);
      }

      .ai-example-success pre {
        background: #0a1812;
        border: 1px solid #1e4d2b;
        color: #d1fae5;
        padding: 1.2rem;
        border-radius: 6px;
        font-size: 0.82rem;
        line-height: 1.65;
        overflow-x: auto;
        margin: 0.5rem 0 1rem;
      }

      .ai-example-success strong {
        color: #4ade80;
        font-weight: 700;
      }

      .ai-example-error {
        background: linear-gradient(135deg, #2a1515, #341a1a);
        border-left: 6px solid #ef4444;
        border: 2px solid #ef4444;
        padding: 1.2rem 1.5rem;
        border-radius: var(--radius);
        margin: 1.5rem 0 2rem;
        box-shadow: 0 8px 24px -10px rgba(239, 68, 68, 0.3);
      }

      .ai-example-error pre {
        background: #1a0d0d;
        border: 1px solid #4d1e1e;
        color: #fecaca;
        padding: 1.2rem;
        border-radius: 6px;
        font-size: 0.82rem;
        line-height: 1.65;
        overflow-x: auto;
        margin: 0.5rem 0 1rem;
      }

      .ai-example-error strong {
        color: #f87171;
        font-weight: 700;
      }

      .ai-calculation-box {
        background: linear-gradient(135deg, #2a2310, #342d15);
        border: 2px solid #fbbf24;
        border-left: 6px solid #fbbf24;
        padding: 1.2rem 1.5rem;
        border-radius: var(--radius);
        margin: 1.5rem 0 2rem;
        box-shadow: 0 8px 24px -10px rgba(251, 191, 36, 0.3);
      }

      .ai-calculation-box ol {
        margin: 0.5rem 0;
        padding-left: 1.5rem;
        font-size: 0.85rem;
        line-height: 1.8;
        color: #fef3c7;
      }

      .ai-calculation-box ul {
        margin: 0.3rem 0;
        padding-left: 1.2rem;
        font-size: 0.78rem;
        line-height: 1.6;
        color: #fde68a;
      }

      .ai-calculation-box pre {
        background: #1a1508;
        border: 1px solid #4d4020;
        color: #fef3c7;
        padding: 1rem;
        border-radius: 6px;
        font-size: 0.8rem;
        line-height: 1.5;
        margin: 0.8rem 0;
      }

      .ai-calculation-box strong {
        color: #fbbf24;
        font-weight: 700;
      }

      /* Enhanced table for AI section */
      .ai-analysis-table {
        background: var(--panel);
        border: 1px solid #3b4958;
        border-radius: var(--radius);
        padding: 0.75rem 1rem 1.25rem;
        margin: 1.25rem 0 2rem;
        box-shadow: 0 4px 20px -6px rgba(0, 0, 0, 0.5);
      }

      .ai-analysis-table table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.8rem;
      }

      .ai-analysis-table th,
      .ai-analysis-table td {
        padding: 10px 12px;
        border: 1px solid #3b4958;
        text-align: left;
        color: #e2e8f0;
      }

      .ai-analysis-table th {
        background: linear-gradient(135deg, #1f2937, #2d3748);
        font-weight: 700;
        letter-spacing: 0.5px;
        font-size: 0.72rem;
        text-transform: uppercase;
        color: #60a5fa;
        border-bottom: 2px solid #3b82f6;
      }

      .ai-analysis-table tbody tr:nth-child(odd) {
        background: #1a2332;
      }

      .ai-analysis-table tbody tr:hover {
        background: #243447;
        transition: background 0.2s ease;
      }

      .ai-analysis-table code {
        background: #0d1520;
        border: 1px solid #2d4356;
        color: #60a5fa;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      /* Highlight key formulas */
      .formula-highlight {
        background: linear-gradient(135deg, #1e3a5f, #2d4a6f);
        border: 2px solid #3b82f6;
        padding: 1rem 1.2rem;
        border-radius: var(--radius);
        font-family: var(--mono);
        font-size: 0.85rem;
        line-height: 1.5;
        margin: 1rem 0 1.5rem;
        color: #bfdbfe;
        box-shadow: 0 6px 20px -8px rgba(59, 130, 246, 0.4);
      }

      .formula-highlight strong {
        color: #60a5fa;
        font-weight: 700;
      }

      /* Print adjustments */
      @media print {
        body {
          background: #fff;
          color: #000;
        }
        .panel,
        .trust-box,
        .callout,
        .flowchart,
        .table-wrapper,
        blockquote,
        pre {
          break-inside: avoid;
          box-shadow: none;
        }
        h1 {
          -webkit-background-clip: unset;
          background-clip: unset;
          color: #000;
        }
        a {
          color: #000;
        }
      }

      /* Light theme overrides (export-friendly) */
      :root {
        --bg: #ffffff;
        --bg-alt: #f9fafb;
        --panel: #ffffff;
        --panel-alt: #f3f4f6;
        --text: #0f172a;
        --text-soft: #475569;
        --accent: #2563eb;
        --accent-alt: #3b82f6;
        --ok: #16a34a;
        --warn: #f59e0b;
        --bad: #ef4444;
        --neutral: #64748b;
        --code-bg: #f8fafc;
        --code-border: #e5e7eb;
      }

      /* General */
      body {
        background: var(--bg);
        color: var(--text);
      }
      blockquote {
        background: var(--panel-alt);
        color: var(--text-soft);
      }
      hr {
        border-top: 1px solid #e5e7eb;
      }

      /* Tables */
      .table-wrapper {
        background: var(--panel);
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 8px -4px rgba(0, 0, 0, 0.12);
      }
      .table-wrapper th,
      .table-wrapper td {
        border: 1px solid #e5e7eb;
      }
      .table-wrapper th {
        background: var(--panel-alt);
        color: var(--text-soft);
      }
      .table-wrapper tbody tr:nth-child(odd) {
        background: #f9fafb;
      }
      .table-wrapper tbody tr:hover {
        background: #f1f5f9;
      }

      /* Panels and UI blocks */
      .panel {
        border: 1px solid #e5e7eb;
        box-shadow: 0 6px 20px -12px rgba(0, 0, 0, 0.15);
      }
      .inline-kv {
        background: var(--panel-alt);
        border: 1px solid #e5e7eb;
      }
      .legend span {
        border: 1px solid #e5e7eb;
      }
      .report-nav {
        border: 1px solid #e5e7eb;
      }
      .report-nav a {
        background: #eef2f7;
        border: 1px solid #e5e7eb;
        color: #1f2937;
      }
      .report-nav a:hover {
        background: #e2e8f0;
      }

      /* Trust and callouts */
      .trust-box {
        background: linear-gradient(135deg, #f8fafc, #eef2f7);
        border: 1px solid #e5e7eb;
        box-shadow: 0 8px 30px -18px rgba(0, 0, 0, 0.12);
      }
      .trust-box h3 {
        color: var(--accent);
      }
      .formula {
        background: #f8fafc;
        border: 1px solid #e5e7eb;
      }
      .callout {
        background: #f8fafc;
        border: 1px solid #e5e7eb;
      }

      /* AI section */
      .ai-prompt-box {
        background: linear-gradient(135deg, #eef2ff, #f8fafc);
        box-shadow: 0 8px 24px -10px rgba(59, 130, 246, 0.2);
      }
      .ai-prompt-box pre {
        background: #f1f5f9;
        border: 1px solid #e5e7eb;
        color: #0f172a;
      }
      .ai-prompt-box code {
        background: #eef2ff;
        border: 1px solid #bfdbfe;
        color: #1e40af;
      }

      .ai-example-success {
        background: linear-gradient(135deg, #ecfdf5, #ffffff);
        box-shadow: 0 8px 24px -10px rgba(34, 197, 94, 0.2);
      }
      .ai-example-success pre {
        background: #f0fdf4;
        border: 1px solid #dcfce7;
        color: #064e3b;
      }
      .ai-example-success strong {
        color: #16a34a;
      }

      .ai-example-error {
        background: linear-gradient(135deg, #fef2f2, #ffffff);
        box-shadow: 0 8px 24px -10px rgba(239, 68, 68, 0.2);
      }
      .ai-example-error pre {
        background: #fef2f2;
        border: 1px solid #fecaca;
        color: #7f1d1d;
      }
      .ai-example-error strong {
        color: #dc2626;
      }

      .ai-calculation-box {
        background: linear-gradient(135deg, #fff7ed, #ffffff);
        box-shadow: 0 8px 24px -10px rgba(251, 191, 36, 0.2);
      }
      .ai-calculation-box ol {
        color: #7c2d12;
      }
      .ai-calculation-box ul {
        color: #a16207;
      }
      .ai-calculation-box pre {
        background: #fffbeb;
        border: 1px solid #fef3c7;
        color: #7c2d12;
      }
      .ai-calculation-box strong {
        color: #b45309;
      }

      /* AI tables */
      .ai-analysis-table {
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 10px -6px rgba(0, 0, 0, 0.15);
      }
      .ai-analysis-table th,
      .ai-analysis-table td {
        border: 1px solid #e5e7eb;
        color: #0f172a;
      }
      .ai-analysis-table th {
        background: linear-gradient(135deg, #eef2f7, #f8fafc);
        color: #1f2937;
        border-bottom: 2px solid #3b82f6;
      }
      .ai-analysis-table tbody tr:nth-child(odd) {
        background: #f9fafb;
      }
      .ai-analysis-table tbody tr:hover {
        background: #f1f5f9;
      }
      .ai-analysis-table code {
        background: #f1f5f9;
        border: 1px solid #e5e7eb;
        color: #1e3a8a;
      }
    </style>
</head>

<body>
    <nav class="report-nav">
        <a href="PROFESSIONAL_REPORT.html">Main Report</a>
        <a href="hybrid_analysis_flow.html">Backend Logic</a><!-- active when on backend page -->
        <a href="hybrid_analyzer_report_complex_logic_loops_cpp.html">Complex Loops</a>
        <a href="hybrid_analyzer_report_multi_deminsion_matrix_cpp.html">Multi-Dim Matrix</a>
        <a href="hybrid_analyzer_report_stencil_patterns_cpp.html">Stencil Kernels</a>
        <a href="hybrid_analyzer_report_problematic_patterns_cpp.html" class="primary">Problematic Patterns</a>
        <a href="hybrid_analyzer_report_game_bullets_parallel_test_cpp.html">Game Bullets</a>
    </nav>
    <h1>Hybrid Analyzer Technical Report</h1>
    <p><strong>File analyzed:</strong> problematic_patterns.cpp</p>
    <p><strong>Total processing time:</strong> 0.85 seconds</p>

    <section>
        <h2>1. Code Context</h2>
        <p>
            This source is a <strong>curated stress corpus</strong> of loop
            constructs that look superficially arithmetic yet embody
            <em>semantic hazards</em> for naive parallelization: prefix scans (true
            loop-carried recurrence), indirect/gather loads, per-iteration I/O side
            effects, dynamic compaction (filter producing a packed output), random
            indexed updates with potential write collisions, Fibonacci-style
            multi-step recurrences, and deeply branched control flow. Its purpose is
            to exercise the hybrid analyzer's
            <strong>rejection discipline</strong> and demonstrate guardrails that
            prevent unsafe pragma emission even when an AI layer offers optimistic
            classifications.
        </p>
        <p>
            Just as the <code>complex_logic_loops.cpp</code> file showcases mixed
            benign initialization and selective accumulation, this file showcases
            the <em>opposite end</em>—cases where structural safety fails or
            requires algorithmic refactoring (e.g., transform prefix sum to a
            parallel scan, convert recurrence to wavefront). It provides an
            educational baseline: "Why isn’t every arithmetic loop parallel?"
        </p>
        <pre>
    <code>
        // Problematic Patterns - Difficult or Unsafe to Parallelize
        // These examples show patterns that require special handling

        #include <iostream>
        #include <vector>
        #include <cstdlib>
        #include <cstdio>  // for printf

        // Forward declaration for helper function
        int expensive_function(int x);

        void function_calls_with_side_effects() {
            // ❌ NOT SAFE - Function calls with side effects
            const int n = 1000;
            int array[n], result[n];
            
            for (int i = 0; i < n; i++) {
                result[i] = expensive_function(array[i]);  // Unknown side effects
            }
            
            // Problem: Function might have side effects, global state, I/O
        }

        void prefix_sum_sequential_dependency() {
            // ❌ NOT EASILY PARALLELIZABLE - Sequential dependency
            const int n = 1000;
            int array[n];
            
            for (int i = 1; i < n; i++) {
                array[i] += array[i-1];  // Each iteration depends on previous
            }
            
            // Problem: True data dependency - needs parallel scan algorithms
            // Suggested: Use specialized parallel scan algorithms
        }

        void indirect_memory_access() {
            // ⚠️ DIFFICULT - Indirect access patterns
            const int n = 1000;
            int array[n], index[n], result[n];
            
            for (int i = 0; i < n; i++) {
                result[i] = array[index[i]];  // Random memory access
            }
            
            // Problem: Cache performance issues, potential memory conflicts
            // Suggested: May parallelize but with poor performance
        }

        void loop_with_io() {
            // ❌ NOT SAFE - I/O operations
            const int n = 100;
            int data[n];
            
            for (int i = 0; i < n; i++) {
                printf("Processing item %d: %d\n", i, data[i]);  // I/O side effect
            }
            
            // Problem: I/O operations are not thread-safe by default
        }

        void filter_with_output_dependency() {
            // ⚠️ COMPLEX - Filter pattern with output dependency
            const int n = 1000;
            int input[n], output[n];
            int count = 0;
            
            for (int i = 0; i < n; i++) {
                if (input[i] > 100) {
                    output[count++] = input[i];  // Output index depends on previous iterations
                }
            }
            
            // Problem: Output index depends on how many elements passed filter
            // Suggested: Use parallel scan or gather operations
        }

        void random_updates() {
            // ❌ NOT SAFE - Race conditions
            const int n = 1000;
            int array[n], updates[n], indices[n];
            
            for (int i = 0; i < n; i++) {
                array[indices[i]] += updates[i];  // Potential race condition
            }
            
            // Problem: Multiple threads might update same array element
        }

        void cross_iteration_dependency() {
            // ❌ NOT PARALLELIZABLE - Cross-iteration dependency
            const int n = 1000;
            int array[n];
            
            for (int i = 2; i < n; i++) {
                array[i] = array[i-1] + array[i-2];  // Fibonacci-like dependency
            }
            
            // Problem: Each iteration depends on multiple previous iterations
        }

        void complex_control_flow() {
            // ⚠️ COMPLEX - Complex control flow
            const int n = 1000;
            int array[n], result[n];
            
            for (int i = 0; i < n; i++) {
                if (array[i] > 0) {
                    if (array[i] % 2 == 0) {
                        result[i] = array[i] / 2;
                    } else {
                        result[i] = array[i] * 3 + 1;
                        if (result[i] > 1000) {
                            result[i] = 1000;  // Clamp value
                        }
                    }
                } else {
                    result[i] = 0;
                }
            }
            
            // May be parallelizable but complex control flow affects performance
        }

        // Helper function for demonstration
        int expensive_function(int x) {
            // Simulated expensive computation
            static int global_counter = 0;
            global_counter++;  // Side effect!
            return x * x + global_counter;
        }
    </code>
    </pre>
    </section>

    <section>
        <h2>2. Summary of Candidate Findings</h2>
        <div class="callout">
            <strong>Important:</strong> Some AI provisional classifications
            suggested parallelism where semantic dependencies or side effects make
            naive parallelization unsafe. The hybrid guardrails suppress unsafe
            promotions.
        </div>
        <table>
            <thead>
                <tr>
                    <th>Type (Static)</th>
                    <th>Function</th>
                    <th>Line</th>
                    <th>Hybrid Confidence</th>
                    <th>Parallel Potential</th>
                    <th>Suggested Patch (If Legal)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>vectorizable</td>
                    <td>_Z32prefix_sum_sequential_dependencyv</td>
                    <td>29</td>
                    <td>0.40 (capped)</td>
                    <td>unsafe (scan needed)</td>
                    <td><em>Refactor to parallel prefix-scan</em></td>
                </tr>
                <tr>
                    <td>risky</td>
                    <td>_Z12loop_with_iov</td>
                    <td>55</td>
                    <td>0.38</td>
                    <td>unsafe (I/O)</td>
                    <td><em>Defer or buffer output</em></td>
                </tr>
                <tr>
                    <td>vectorizable</td>
                    <td>_Z26cross_iteration_dependencyv</td>
                    <td>95</td>
                    <td>0.42 (dependency)</td>
                    <td>unsafe (recurrence)</td>
                    <td><em>Transform to wavefront / DP</em></td>
                </tr>
            </tbody>
        </table>
        <div class="callout">
            <strong>Why downgraded?</strong> AI proposed safe_parallel due to
            superficial arithmetic patterns; static dependence + semantic heuristics
            (recurrence / side-effect / accumulation) applied a risk_penalty and
            blocked pragma emission.
        </div>
    </section>

    <section>
        <h2>3. Confidence Breakdown Comparison</h2>
        <div class="chart-container"><canvas id="confidenceChart"></canvas></div>
        <div class="callout"><strong>Interpretation:</strong> Final hybrid confidence scores only (single dataset) shown for structural parity with other reports (e.g., Complex Logic Loops). All remain below acceptance (0.60) due to recurrence / side-effect penalties. AI provisional values are documented in subsection 3.a rather than visualized here to avoid implying acceptance.</div>
        <h3>3.a Raw AI / Enhanced Analysis Extracts</h3>
        <pre><code>prefix_sum_sequential_dependency (line 29)
  static: vectorizable (pattern heuristic)
  ai: safe_parallel, confidence 0.90 (OVER-OPTIMISTIC)
  guardrail: detected forward recurrence array[i] depends on array[i-1]
  action: reclassified -> needs_refactoring; hybrid_confidence clamped 0.40

loop_with_io (line 55)
  static: risky
  ai: safe_parallel (misled by simple iteration)
  guardrail: printf side effect + global I/O ordering requirement
  action: suppressed; confidence 0.38; no pragma

cross_iteration_dependency (line 95)
    static: vectorizable (surface pattern) 
    ai: safe_parallel 0.90
    guardrail: multi-step recurrence (i-1, i-2) => true loop-carried RAW dependence
    action: blocked; recurrence tag attaches refactor hint (convert to parallel scan / segmented DP)
</code></pre>
    </section>

    <section>
        <h2>4. Comparative Safety vs. Other Reports</h2>
        <table>
            <thead>
                <tr>
                    <th>Report</th>
                    <th>Accepted Candidates</th>
                    <th>Unsafe Candidates Rejected</th>
                    <th>High-Confidence Rate</th>
                    <th>Comments</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Complex Logic Loops</td>
                    <td>All safe loops ≥0.60</td>
                    <td>1</td>
                    <td>~86% avg confidence</td>
                    <td>Mostly initialization + filtering</td>
                </tr>
                <tr>
                    <td>Stencil Patterns</td>
                    <td>Most stencil loops</td>
                    <td>Few</td>
                    <td>~90% avg confidence</td>
                    <td>Regular neighborhoods</td>
                </tr>
                <tr>
                    <td>Problematic Patterns (this)</td>
                    <td><strong>0</strong></td>
                    <td>3 (all shown)</td>
                    <td>0% (by design)</td>
                    <td>Demonstrates rejection discipline</td>
                </tr>
            </tbody>
        </table>
        <div class="callout">
            <strong>Signal:</strong> The hybrid analyzer's value is not only in
            promotion of good loops, but in <em>credible refusal</em> of unsafe ones
            even when AI superficially labels them safe.
        </div>
    </section>

    <section>
        <h2>5. Visualization: Detection and Confidence</h2>
        <div class="chart-container"><canvas id="comparisonChart"></canvas></div>
        <div class="callout">
            <strong>Visualization Note:</strong> Standardized radar dimensions
            (Accuracy, False Positives quality inversion, Speed, Confidence). Lower
            Confidence reflects deliberate rejection of unsafe candidates; rejection
            discipline is conveyed in Section 5.a.
        </div>
    </section>

    <section>
        <h2>5.a AI Augmentation Impact</h2>
        <div class="callout">
            <strong>Focus:</strong> Illustrates how AI optimistic classifications
            are moderated by static guardrails—matching naming convention with other
            reports.
        </div>
        <table>
            <thead>
                <tr>
                    <th>Function</th>
                    <th>AI Proposed</th>
                    <th>Reason for Rejection / Downgrade</th>
                    <th>Guardrail Trigger</th>
                    <th>Final Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>prefix_sum_sequential_dependency</td>
                    <td>safe_parallel (0.90)</td>
                    <td>Loop-carried accumulation requires scan</td>
                    <td>RAW recurrence (i depends on i-1)</td>
                    <td>Refactor (parallel scan) – no pragma</td>
                </tr>
                <tr>
                    <td>loop_with_io</td>
                    <td>safe_parallel (0.90)</td>
                    <td>Per-iteration I/O ordering & side effects</td>
                    <td>Side-effect (printf)</td>
                    <td>Suggest buffering / move I/O out</td>
                </tr>
                <tr>
                    <td>cross_iteration_dependency</td>
                    <td>safe_parallel (0.90)</td>
                    <td>Fibonacci-style two-step recurrence</td>
                    <td>RAW (i-1, i-2)</td>
                    <td>Algorithmic transform (wavefront)</td>
                </tr>
            </tbody>
        </table>
        <h3>Confidence Alignment</h3>
        <p>
            All three candidates remained below the 0.60 acceptance threshold after
            applying recurrence / side-effect penalties despite high AI provisional
            confidence signals.
        </p>
        <div class="callout">
            <strong>Outcome:</strong> Consistent with other reports’ AI sections: AI
            adds explainability; static dependence logic retains veto power.
        </div>
    </section>

    <section>
        <h2>6. Refactor Recommendations</h2>
        <ul>
            <li>
                <strong>Prefix Sum:</strong> Replace with parallel inclusive scan
                (e.g., Blelloch) using temporary arrays.
            </li>
            <li>
                <strong>Cross-Iteration Recurrence:</strong> Apply transformation to
                dependency graph (wavefront) or reformulate as matrix power / closed
                form if feasible.
            </li>
            <li>
                <strong>Random Updates:</strong> Introduce atomic operations or
                privatization + reduction by key.
            </li>
            <li>
                <strong>Filter Compaction:</strong> Two-phase approach: predicate mask
                + parallel prefix + scatter.
            </li>
            <li>
                <strong>I/O Loop:</strong> Buffer outputs per-thread then merge to
                preserve ordering or move logging outside hot path.
            </li>
        </ul>
    </section>

    <section>
        <h2>7. Trust & Validation Model (Applied)</h2>
        <div class="trust-box">
            <p>
                <strong>Key Point:</strong> This file showcases systemic conservatism:
                hybrid_confidence did not exceed 0.60 for any candidate after
                penalties despite AI optimistic signals.
            </p>
            <ul>
                <li>
                    <strong>Risk Penalties Applied:</strong> recurrence, side_effect_io
                </li>
                <li>
                    <strong>Threshold Gate:</strong> All candidates < 0.60 → no suggestions emitted </li>
                <li>
                    <strong>Explainability:</strong> Structured misclassification table
                    (Section 5.a)
                </li>
            </ul>
            <div class="callout">
                <strong>Educational Value:</strong> Demonstrates why "AI-only" loops
                could lead to incorrect parallelization without static dependence
                enforcement.
            </div>
        </div>
    </section>

    <section>
        <h2>8. Source & Reference Links</h2>
        <p>
            <strong>OpenMP Reference Examples:</strong> SIMD.1.c, ploop.1.c used for
            similarity scoring (see analysis JSON).
        </p>
        <p>
            <strong>Refactor Patterns:</strong> Parallel scan algorithms (Blelloch
            1990), stream compaction, wavefront DP transformations.
        </p>
    </section>

    <script>
        // Confidence Bar: final hybrid confidence only (structural parity with other reports)
        const ctx = document.getElementById("confidenceChart");
        new Chart(ctx, {
            type: "bar",
            data: {
                labels: ["Line 29", "Line 55", "Line 95"],
                datasets: [
                    {
                        label: "Confidence Score",
                        data: [1, 0.65, 1],
                        backgroundColor: [
                            "#22c55e", // capped / downgraded
                            "#60a5fa", // unsafe I/O
                            "#22c55e"  // recurrence penalty
                        ],
                    },
                ],
            },
            options: {
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, max: 1 } },
            },
        });

        // Radar chart: standardized axes consistent with other reports
        const ctx2 = document.getElementById("comparisonChart");
        new Chart(ctx2, {
            type: "radar",
            data: {
                labels: ["Accuracy", "False Positives", "Speed", "Confidence"],
                datasets: [
                    {
                        label: "Hybrid Analyzer",
                        data: [90, 99, 92, 40],
                        fill: true,
                        backgroundColor: "rgba(248,113,113,0.3)",
                        borderColor: "#f87171",
                    },
                    {
                        label: "Intel Advisor",
                        data: [95, 98, 65, 94],
                        fill: true,
                        backgroundColor: "rgba(59,130,246,0.3)",
                        borderColor: "#3b82f6",
                    },
                    {
                        label: "LLVM Baseline",
                        data: [75, 94, 70, 68],
                        fill: true,
                        backgroundColor: "rgba(251,191,36,0.3)",
                        borderColor: "#fbbf24",
                    },
                ],
            },
            options: { scales: { r: { suggestedMin: 0, suggestedMax: 100 } } },
        });
    </script>
</body>

</html>